# 魔卡——高保真原型交付工具

![魔卡](https://qidian.qpic.cn/qidian_common/349573/356d2993e7d6a0ea3eb56d2aaff6ceb4/0)

### 理想与现实

理想：大前端，工程化，前后端分离，模块化开发；<br>
现实：大兄弟，你这是啥啊？我们只要HTML静态页面就好了，你这搞了一堆什么跟什么！

历史遗留原因，很多团队还是传统后端开发套页面方式。即使前端工程化开发成熟大厂也会有类似需求，例如，负责运维公司内部系统的开发，又例如，跨部门甚至异地团队协作时候，希望前端重构交付的就是高质量的HTML原型页面即可，什么自动化工具，前端模板等高科技都不需要，因为对接的开发这些玩不转。

似乎又要回到痛苦的过去，例如：

* 传统静态HTML页面头尾无法公用，20多个页面，如果公用头部变化了，一改该好多地方，累！
* 类似Sass里面变量这么好用的东西就不支持了，万一所有的圆角从2px变成4px，替换都替换不了。
* 传统静态HTML使用file协议预览时候ajax请求一定失败，需要安装和配置Apache或IIS模拟服务环境，这个很烦的，好在一次性的。结果使用会议电脑演示的时候又嗝屁了。产品和开发解压你的压缩包体验时候，异步加载全军覆没，页面效果凄凄惨惨。你说，大大，要装个环境。好吧，我装，大大结果一看安装教程，足足十几步，步步不能错，相当年结婚流程都没这么长，整个人就不好了，友尽。
* 开发那边居然没有资源合并功能，前端只能把JS和CSS全部手动合在一起写，以后维护要看花眼咯。

矛盾就出现了：需求方和交接方希望干净的HTML原型，方便的效果预览；前端同学希望开发时候快速便捷好维护。

那有没有什么办法同时兼顾呢？

这样的痛点促使了“魔卡”的出现。免安装，直击静态页面开发痛点，提高开发效率降低维护成本。

### “魔卡”简介

是个Node.js小工具，纯原生，无任何安装包依赖，所以，就很轻量了。通常后端开发都是windows机器多，因此，还准备了run.bat文件，直接双击就可以跑。产品同学也可以玩，开发同学也可以玩。

相比工程化那套东西要简单很多，也没有乱七八糟npm package安装问题。

“魔卡”主要功能：

* HTML import功能，头部和尾部可以公用啦
* 基于文件夹的CSS和JS资源合并策略
* 支持qcss快速书写，变量以及@import模块引入
* 本地http环境一键开启，post/get请求轻松模拟

### 目录结构
./src/  为开发目录
./dist/ 为生成目录，原型预览，和静态资源交付都在这个文件夹下

### 原型预览
1. 可以直接双击./dist/views/html/*.html文件预览，但无法显示ajax请求交互效果。
2. 如果希望看到请求交互效果，需要跑下run.js，然后：http://127.0.0.1:2017/views/html/*.html 访问。这里2017是可变的，基于当前年份设置的。

### 开发说明

./src/目录下开发。

开发时候需要跑下run.js，步骤如下：

1. 安装[node.js](https://nodejs.org/zh-cn/)
2. 命令行node run。windows系统可以双击run.bat

run.js这个node.js脚本纯原生，不依赖任何包，直接执行即可！

执行后会自动开启watch，以及本地服务功能。

### TO后端开发
注意！联调或者是项目上线后的日常维护，只能修改./src/目录下CSS和JS，dist目录下的是工具合并生成的，如果修改，日后会被覆盖。

## 详细说明

### 一些注意事项

* 参照项目示意文件结构进行开发，css, js, images, html等目录名称和层级是不能调整的，否则run.js会跑不起来。如果进行了修改，需要同步修改run.js相关路径。
* css, js及其以下子目录，目前仅支持1级文件夹结构，名称可以任意。
* images文件夹下目录层级任意。

### 合并规则说明

先说说为什么要合并。

合并规则具体：

...
